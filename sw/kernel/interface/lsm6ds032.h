#ifndef _LSM6DS032_H
#define _LSM6DS032_H

#include <linux/bits.h>

#include <cstdint>

typedef uint8_t lsm6ds032_reg_addr_t;
typedef uint8_t lsm6ds032_reg_value_t;

#define LSM6DS032_FUNC_CFG_ACCESS_ADDR  	0x01
#define LSM6DS032_PIN_CTRL_ADDR 		 	0x02
#define LSM6DS032_FIFO_CTRL1_ADDR 		 	0x07
#define LSM6DS032_FIFO_CTRL2_ADDR 		 	0x08
#define LSM6DS032_FIFO_CTRL3_ADDR 		 	0x09
#define LSM6DS032_FIFO_CTRL4_ADDR 		 	0x0A
#define LSM6DS032_COUNTER_BDR_REG1_ADDR  	0x0B
#define LSM6DS032_COUNTER_BDR_REG2_ADDR  	0x0C
#define LSM6DS032_INT1_CTRL_ADDR 		 	0x0D
#define LSM6DS032_INT2_CTRL_ADDR 		 	0x0E
#define LSM6DS032_WHO_AM_I_ADDR 		 	0x0F
#define LSM6DS032_CTRL1_XL_ADDR 		 	0x10
#define LSM6DS032_CTRL2_G_ADDR 		 		0x11
#define LSM6DS032_CTRL3_C_ADDR 		 		0x12
#define LSM6DS032_CTRL4_C_ADDR 		 		0x13
#define LSM6DS032_CTRL5_C_ADDR 		 		0x14
#define LSM6DS032_CTRL6_C_ADDR 		 		0x15
#define LSM6DS032_CTRL7_G_ADDR 		 		0x16
#define LSM6DS032_CTRL8_XL_ADDR 		 	0x17
#define LSM6DS032_CTRL9_XL_ADDR 		 	0x18
#define LSM6DS032_CTRL10_C_ADDR 		 	0x19
#define LSM6DS032_ALL_INT_SRC_ADDR 	 		0x1A
#define LSM6DS032_WAKE_UP_SRC_ADDR 	 		0x1B
#define LSM6DS032_TAP_SRC_ADDR 		 		0x1C
#define LSM6DS032_D6D_SRC_ADDR 		 		0x1D
#define LSM6DS032_STATUS_REG_ADDR 		 	0x1E
#define LSM6DS032_OUT_TEMP_L_ADDR 		 	0x20
#define LSM6DS032_OUT_TEMP_H_ADDR 		 	0x21
#define LSM6DS032_OUTX_L_G_ADDR 		 	0x22
#define LSM6DS032_OUTX_H_G_ADDR 		 	0x23
#define LSM6DS032_OUTY_L_G_ADDR 		 	0x24
#define LSM6DS032_OUTY_H_G_ADDR 		 	0x25
#define LSM6DS032_OUTZ_L_G_ADDR 		 	0x26
#define LSM6DS032_OUTZ_H_G_ADDR 		 	0x27
#define LSM6DS032_OUTX_L_A_ADDR 		 	0x28
#define LSM6DS032_OUTX_H_A_ADDR 		 	0x29
#define LSM6DS032_OUTY_L_A_ADDR 		 	0x2A
#define LSM6DS032_OUTY_H_A_ADDR 		 	0x2B
#define LSM6DS032_OUTZ_L_A_ADDR 		 	0x2C
#define LSM6DS032_OUTZ_H_A_ADDR 		 	0x2D
#define LSM6DS032_EMB_FUNC_STATUS_MAINPAGE_ADDR  0x35
#define LSM6DS032_FSM_STATUS_A_MAINPAGE_ADDR  0x36
#define LSM6DS032_STATUS_MASTER_MAINPAGE_ADDR  0x39
#define LSM6DS032_FIFO_STATUS1_ADDR 	 	0x3A
#define LSM6DS032_FIFO_STATUS2_ADDR 	 	0x3B
#define LSM6DS032_TIMESTAMP0_ADDR 		 	0x40
#define LSM6DS032_TIMESTAMP1_ADDR 		 	0x41
#define LSM6DS032_TIMESTAMP2_ADDR 		 	0x42
#define LSM6DS032_TIMESTAMP3_ADDR 		 	0x43
#define LSM6DS032_TAP_CFG0_ADDR 		 	0x56
#define LSM6DS032_TAP_CFG1_ADDR 		 	0x57
#define LSM6DS032_TAP_CFG2_ADDR 		 	0x58
#define LSM6DS032_TAP_THS_6D_ADDR 		 	0x59
#define LSM6DS032_INT_DUR2_ADDR 		 	0x5A
#define LSM6DS032_WAKE_UP_THS_ADDR 	 		0x5B
#define LSM6DS032_WAKE_UP_DUR_ADDR 	 		0x5C
#define LSM6DS032_FREE_FALL_ADDR 		 	0x5D
#define LSM6DS032_MD1_CFG_ADDR 		 		0x5E
#define LSM6DS032_MD2_CFG_ADDR 		 		0x5F
#define LSM6DS032_I3C_BUS_AVB_ADDR 	 		0x62
#define LSM6DS032_INTERNAL_FREQ_FINE_ADDR  	0x63
#define LSM6DS032_X_OFS_USR_ADDR 		 	0x73
#define LSM6DS032_Y_OFS_USR_ADDR 		 	0x74
#define LSM6DS032_Z_OFS_USR_ADDR 		 	0x75
#define LSM6DS032_FIFO_DATA_OUT_TAG_ADDR  	0x78
#define LSM6DS032_FIFO_DATA_OUT_X_L_ADDR  	0x79
#define LSM6DS032_FIFO_DATA_OUT_X_H_ADDR  	0x7A
#define LSM6DS032_FIFO_DATA_OUT_Y_L_ADDR  	0x7B
#define LSM6DS032_FIFO_DATA_OUT_Y_H_ADDR  	0x7C
#define LSM6DS032_FIFO_DATA_OUT_Z_L_ADDR  	0x7D
#define LSM6DS032_FIFO_DATA_OUT_Z_H_ADDR  	0x7E

#define LSM6DS032_WHO_AM_I 					0x6C

typedef enum lsm_odr {
	LSM6DS032_ODR_POWER_DOWN,
	LSM6DS032_ODR_12_5_HZ,
	LSM6DS032_ODR_26_HZ,
	LSM6DS032_ODR_52_HZ,
	LSM6DS032_ODR_104_HZ,
	LSM6DS032_ODR_208_HZ,
	LSM6DS032_ODR_416_HZ,
	LSM6DS032_ODR_833_HZ,
	LSM6DS032_ODR_1_66_KHZ,
	LSM6DS032_ODR_3_33_KHZ,
	LSM6DS032_ODR_6_66_KHZ,
	LSM6DS032_ODR_1_6_HZ,
} lsm6ds032_odr_t;

#define LSM6DS032_ODR_MASK				0b11110000
#define LSM6DS032_ODR3					BIT(7)
#define LSM6DS032_ODR2					BIT(6)
#define LSM6DS032_ODR1					BIT(5)
#define LSM6DS032_ODR0					BIT(4)

typedef enum lsm_accel_scale {
	LSM6DS032_ACCEL_SCALE_4_G,
	LSM6DS032_ACCEL_SCALE_32_G,
	LSM6DS032_ACCEL_SCALE_8_G,
	LSM6DS032_ACCEL_SCALE_16_G,
} lsm6ds032_accel_scale_t;

#define LSM6DS032_ACCEL_SCALE_MASK		0b00001100
#define LSM6DS032_FS1_XL				BIT(3)
#define LSM6DS032_FS0_XL				BIT(2)

#define LSM6DS032_LPF2_XL_EN			BIT(1)

typedef enum lsm_gyro_scale {
	LSM6DS032_GYRO_SCALE_125_DPS,
	LSM6DS032_GYRO_SCALE_250_DPS,
	LSM6DS032_GYRO_SCALE_500_DPS,
	LSM6DS032_GYRO_SCALE_1000_DPS,
	LSM6DS032_GYRO_SCALE_2000_DPS,
} lsm6ds032_gyro_scale_t;

#define LSM6DS032_GYRO_SCALE_MASK		0b00001110
#define LSM6DS032_FS1_G					BIT(3)
#define LSM6DS032_FS0_G					BIT(2)
#define LSM6DS032_FS_125				BIT(1)

#define LSM6DS032_CTRL3_C_BOOT			BIT(7)
#define LSM6DS032_CTRL3_C_BDU			BIT(6)
#define LSM6DS032_CTRL3_C_H_LACTIVE		BIT(5)
#define LSM6DS032_CTRL3_C_PP_OD			BIT(4)
#define LSM6DS032_CTRL3_C_SIM			BIT(3)
#define LSM6DS032_CTRL3_C_IF_INC		BIT(2)
#define LSM6DS032_CTRL3_C_SW_RST		BIT(0)

#define LSM6DS032_CTRL4_C_SLEEP_G		BIT(6)
#define LSM6DS032_CTRL4_C_INT2_ON_INT1	BIT(5)
#define LSM6DS032_CTRL4_C_DRDY			BIT(3)
#define LSM6DS032_CTRL4_C_I2C_DISABLE	BIT(2)
#define LSM6DS032_CTRL4_C_LPF1_SEL_G	BIT(0)

typedef enum lsm_gyro_lpf_bw {
	LSM6DS032_G_LPF_BW_0,
	LSM6DS032_G_LPF_BW_1,
	LSM6DS032_G_LPF_BW_2,
	LSM6DS032_G_LPF_BW_3,
	LSM6DS032_G_LPF_BW_4,
	LSM6DS032_G_LPF_BW_5,
	LSM6DS032_G_LPF_BW_6,
	LSM6DS032_G_LPF_BW_7,
} lsm6ds032_gyro_lpf_bw_t;

#define LSM6DS032_G_LPF_BW_MASK			0b00000111
#define LSM6DS032_G_FTYPE_2				BIT(2)
#define LSM6DS032_G_FTYPE_1				BIT(1)
#define LSM6DS032_G_FTYPE_0				BIT(0)

#define LSM6DS032_CTRL10_C_TS_EN 		BIT(5)

#define LSM6DS032_STATUS_MASK			0b00000111
#define LSM6DS032_STATUS_TDA			BIT(2)
#define LSM6DS032_STATUS_GDA			BIT(1)
#define LSM6DS032_STATUS_XLDA			BIT(0)

struct vector3d {
	int16_t		x;
	int16_t 	y;
	int16_t		z;
};

struct motion_data {
	struct vector3d		gyro;
	struct vector3d		accel;
};

struct lsm6ds032_reg_io {
	lsm6ds032_reg_addr_t		addr;
	lsm6ds032_reg_value_t		value;
};

struct lsm6ds032_config {

};

#endif  // _LSM6DS032_H
